<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
	<title>Character Stream</title>
	<script src="data.js"></script>
	<style>
	body{
		background:#ffffff;
		font-family: courier new;
	}
	h1{

	}
	img{
		width:32%;
	}
	</style>
	<script type="application/x-javascript">
	var n = 0;
	var colors = ["#ffffff", "#efefef", "#eeeeee", "#dedede", "#dddddd", "#cdcdcd", "#cccccc", "#bcbcbc", "#bbbbbb","Hotpink"];
	//var story = replaceAll(selfishGiant.text, " ", '?' );
	var story = selfishGiant.text;

	function escapeRegExp(string) {
	    return string.replace(/([.*+?^=!:${}()|\[\]\/\\])/g, "\\$1");
	}
	function replaceAll(string, find, replace) {
	  return string.replace(new RegExp(escapeRegExp(find), 'g'), replace);
	}
	
	function increment() {	
            setTimeout(function () {
            	var mycolor = colors[Math.floor(Math.random() * colors.length)];
            	
                if (n < story.length){
                	if (story[n] == "\n"){document.getElementsByTagName("body")[0].style.backgroundColor = mycolor;
                		//document.getElementsByTagName("p")[0].appendChild(document.createTextNode(story[n]));
                		document.getElementsByTagName("p")[0].innerHTML = document.getElementsByTagName("p")[0].innerHTML + story[n] + "<br /><br />\n";
                	 }else{
                	 	//document.getElementsByTagName("p")[0].appendChild(document.createTextNode(story[n]));
                	 	document.getElementsByTagName("p")[0].innerHTML = document.getElementsByTagName("p")[0].innerHTML + story[n];
                	 }
                	
                	n = n+1;
                }
                increment();
            }, 40);
        }

        window.onload = function () {
            increment();
        }
    </script>
</head>
<body>
	<h2>The Selfish Giant by Oscar Wilde</h2>
<p></p>

	<script type="application/x-javascript">
	window.onclick = function () {
		// nothing here yet
		// perhaps this gets to pause the stream?
		// http://stackoverflow.com/questions/3969475/javascript-pause-settimeout
	}
	</script>
</body>
</html>