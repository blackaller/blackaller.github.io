<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
	<title>youtube bg</title>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

	<!-- NEED MEDIA QUERIES FOR FONT SIZES ON PHONES AND TABLETS -->
	<meta name = "viewport" content = "initial-scale=1.0, user-scalable=no, width=device-width">
	<meta name=apple-mobile-web-app-capable content=yes>
	<meta names="apple-mobile-web-app-status-bar-style" content="black-translucent" />	

	<link href='http://fonts.googleapis.com/css?family=Inconsolata:400,700' rel='stylesheet' type='text/css'>
	<link href='http://fonts.googleapis.com/css?family=Nunito:400,300,700' rel='stylesheet' type='text/css'>

	<link href='css/main.css' rel='stylesheet' type='text/css'>

	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" type="text/javascript"></script>
	<script type="text/javascript" charset="utf-8" src="js/jquery.tubular.1.0.js"></script>
	<script type="text/javascript" charset="utf-8" src="js/init.js"></script>


    <script type="text/javascript" charset="utf-8">
    	var iOS_iphone = ( navigator.userAgent.match(/(ipod|iphone)/i) ? true : false );
    	// To do clean up. isFalling keeps track para saber si apadawn.
    	var isFalling = true;

    	$('document').ready(function() {

    		window.scrollTo(0, 1);
    		randomPalette();

    		var options = {};
			options = randomTube(tube);


			if (!iOS_iphone) $('#video-bg').tubular(options);
			else {
				$('#picture-bg').addClass('show').removeClass('hide');
				$('#picture-bg').css('background', 'url(' + randomBg().url + ')');
				$('#picture-bg').css('background-size', 'cover');
				$('#picture-bg').css('background-position', 'center');
			}



			$('#video-overlay').add('#top-bar').add('#intro-blurb').hide();

		    setTimeout(function(){
		        $('#video-overlay').add('#top-bar').add('#intro-blurb').fadeIn(2000, function(){
		        	$('#intro-text').css("padding-top", ($(window).height() - $("#intro-text").height())/2 + 'px' );
					});
		    }, 3000);
		    
		});

	</script>

	<style></style>
</head>

<body>
	<div id="video-bg"></div>

	<div id="picture-bg" class="hide"></div>


	<section id='video-overlay'>
		<div id="intro-blurb" class="show">
			<p id="intro-text">
				In the centre of a chamber Prince Pwyll sat upon a seat of green rushes, over which was spread a covering of flame-coloured satin, and a cushion of red satin was under his elbow.
			</p>
		</div>
	</section>

	

	<section id='top-bar' class="tubular-pause">
		<div class='anagram hidden'>
			<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" 
	 width="40px" height="40px" viewBox="0 0 80 80" enable-background="new 0 0 80 80" xml:space="preserve">
			<g class="white">
				<g>
					<path  d="M77.517,24.564c-1.705-4.896-4.244-9.196-7.547-12.782c-3.456-3.753-7.697-6.664-12.605-8.65
						C52.231,1.054,46.39,0,40.001,0C27.753,0,17.479,4.07,10.293,11.771c-3.359,3.6-5.952,7.896-7.706,12.771
						C0.871,29.312,0,34.512,0,40c0,11.504,3.292,21.254,9.518,28.198c3.388,3.775,7.617,6.695,12.573,8.676
						C27.284,78.947,33.311,80,40.001,80c6.845,0,12.964-1.051,18.188-3.125c4.98-1.979,9.205-4.9,12.556-8.689
						c3.137-3.547,5.517-7.857,7.072-12.814C79.266,50.756,80,45.584,80,40C80,34.491,79.165,29.298,77.517,24.564z M73.597,54.047
						c-1.368,4.359-3.442,8.131-6.165,11.207c-6.058,6.85-15.287,10.322-27.431,10.322c-6.126,0-11.6-0.945-16.269-2.812
						c-4.318-1.725-7.993-4.256-10.921-7.52C7.324,59.125,4.424,50.396,4.424,40c0-4.975,0.782-9.672,2.325-13.959
						c1.55-4.307,3.831-8.092,6.778-11.251c3.051-3.269,6.771-5.812,11.059-7.559c0.396-0.162,0.799-0.317,1.206-0.465
						c3.566,8.05,13.793,15.792,27.1,19.536c7.504,2.112,14.833,2.628,21.098,1.779c1.054,3.703,1.588,7.703,1.588,11.92
						C75.577,45.134,74.91,49.859,73.597,54.047z"/>
					<path  d="M20.643,30.46c-2.292,0-4.156,1.864-4.156,4.156c0,2.292,1.864,4.157,4.156,4.157s4.156-1.865,4.156-4.157
						C24.799,32.324,22.935,30.46,20.643,30.46z"/>
					<path  d="M59.358,30.858c-2.292,0-4.157,1.864-4.157,4.156c0,2.292,1.865,4.157,4.157,4.157s4.156-1.865,4.156-4.157
						C63.515,32.722,61.65,30.858,59.358,30.858z"/>
					<path d="M53.083,44.234H26.541c-0.95,0-1.721,0.771-1.721,1.721c0,0.949,0.771,1.721,1.721,1.721h26.542
						c0.95,0,1.721-0.771,1.721-1.721C54.804,45.005,54.033,44.234,53.083,44.234z"/>
				</g>
				
			</g>
			</svg>


		</div>
		<div class="caret down">
			<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 width="40px" height="40px" viewBox="0 0 40 40" enable-background="new 0 0 40 40" xml:space="preserve">
				<g>
					<path class="white" d="M20,38.155c10.011,0,18.155-8.144,18.155-18.155S30.011,1.845,20,1.845S1.845,9.989,1.845,20
						S9.989,38.155,20,38.155L20,38.155z"/>
				</g>
				<g>
					<polygon class="black" points="20,10.178 31.808,21.986 28.882,24.911 20,16.029 11.118,24.911 8.192,21.986 	"/>
				</g>
			</svg>

		</div>
	</section>
	
	<section id='content-wrapper'>
		<div id="menu-bar">
			<ul>
				<li>Pryderi</li>
				<li>Branwen</li>
				<li>Taliesin</li>
				<li>Gwydion</li>
			</ul>
		</div>
		
		<div class="content-block" id="featured-pages">

			<div class="link-bar">
				<div class="link-category">
					 The Mabinogion
				</div>
				<div class="link-element">
					White Book of Rhydderch
				</div>
				<div class="link-element">
					 Red Book of Hergest
				</div>
			</div>

			<div class="link-bar">
				<div class="link-category">
					The Four Branches of the Mabinogi
				</div>
				<div class="link-element">
					Pwyll, Prince of Dyfed
				</div>
				<div class="link-element">
					Branwen, daughter of Llŷr
				</div>

				<div class="link-element">
					Manawydan, son of Llŷr
				</div>
				<div class="link-element">
					Math, son of Mathonwy
				</div>
			</div>
			
			

			<!--div class='anagram'>
				<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"  viewBox="0 0 100 91.672" enable-background="new 0 0 100 91.672" xml:space="preserve">
					<g>
						<path class="tube-color" d="M87.559,0L75.125,9.621v42.381L56.121,37.273H43.785L24.883,52.002V9.582L12.432,0L0,9.557v71.883
							l12.465,10.232L49.998,59.15L87.85,91.67l12.137-10.217L100,9.58L87.559,0z M0.957,80.951V10.066l10.996-8.453v88.365L0.957,80.951
							z M76.084,54.133V10.129L87.08,1.617l0.002,70.773l-41.86-34.113h10.556L76.084,54.133z M12.908,89.881V1.613l11.018,8.477
							l-0.002,42.32l-0.018,15.031l18.203-15.158l7.188,6.182L12.908,89.881z M99.029,80.955l-11.121,9.404L42.109,50.918L24.867,65.154
							l0.016-11.852l19.062-14.867l44.094,36.182V1.613l11.002,8.475L99.029,80.955z"/>
					</g>
				</svg>
			</div-->

		</div>
		
		<div class="quote">
			<p>
				So he went forward to the Court, and when he came there, he beheld sleeping-rooms, and halls, and chambers, and the most beautiful buildings ever seen. And he went into the hall to disarray, and there came youths and pages and disarrayed him, and all as they entered saluted him.
			</p>
		</div>
		
		<div class="image test">
			
		</div>
		
		<div id="footer">
			<div class='anagram'>
				<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="300px" height="300px" viewBox="0 0 80 80" enable-background="new 0 0 80 80" xml:space="preserve">
					<g>
						<path class="tube-color" d="M77.512,24.521c-1.703-4.89-4.237-9.183-7.531-12.76c-3.445-3.741-7.675-6.643-12.572-8.625
							C52.27,1.054,46.413,0,40.001,0C27.736,0,17.46,4.063,10.285,11.753c-3.353,3.592-5.941,7.883-7.693,12.753
							C0.872,29.283,0,34.496,0,39.999c0,11.532,3.287,21.292,9.504,28.226c3.373,3.76,7.588,6.668,12.528,8.643
							C27.235,78.945,33.28,80,40.001,80c6.878,0,13.019-1.054,18.253-3.132c4.964-1.971,9.171-4.882,12.506-8.651
							c3.126-3.533,5.498-7.834,7.051-12.783C79.264,50.805,80,45.611,80,39.999C80,34.472,79.163,29.264,77.512,24.521z M74.944,54.534
							c-1.426,4.543-3.591,8.477-6.435,11.691c-3.02,3.414-6.844,6.055-11.364,7.85c-4.88,1.938-10.648,2.92-17.145,2.92
							c-6.337,0-12.007-0.981-16.853-2.918c-4.508-1.802-8.346-4.445-11.407-7.859c-5.716-6.372-8.737-15.438-8.737-26.219
							c0-5.155,0.812-10.026,2.414-14.476c1.613-4.485,3.99-8.428,7.063-11.721c3.485-3.735,7.787-6.538,12.754-8.352
							c3.342,8.445,13.961,16.671,27.898,20.592c7.945,2.236,15.7,2.716,22.243,1.703c1.075,3.813,1.619,7.923,1.619,12.253
							C76.996,45.306,76.306,50.196,74.944,54.534z"/>
						<path class="tube-color" d="M20.279,30.531c-2.196,0-3.983,1.787-3.983,3.983s1.787,3.984,3.983,3.984c2.197,0,3.985-1.788,3.985-3.984
							S22.476,30.531,20.279,30.531z"/>
						<path class="tube-color" d="M59.723,30.936c-2.198,0-3.985,1.787-3.985,3.983c0,2.197,1.787,3.985,3.985,3.985
							c2.196,0,3.982-1.788,3.982-3.985C63.705,32.723,61.919,30.936,59.723,30.936z"/>
						<path class="tube-color" d="M53.329,44.564H26.288c-0.83,0-1.502,0.672-1.502,1.502s0.672,1.502,1.502,1.502h27.041
							c0.829,0,1.502-0.672,1.502-1.502S54.158,44.564,53.329,44.564z"/>
					</g>
				</svg>
			</div>
			<ul>
				<li>Pryderi</li>
				<li>Branwen</li>
				<li>Taliesin</li>
				<li>Gwydion</li>
			</ul>
		</div>
	</section>


    <script>
    	function togglePlay(myButton){
			var myButtonClass = $(myButton).attr('class');
			if ( myButtonClass==='tubular-pause' ){
				$("#intro-blurb").addClass('hide').removeClass('show');
				$(".caret").addClass('up').removeClass('down');
				$(myButton).addClass('tubular-play').removeClass('tubular-pause');
			}
			else{
				if ( myButtonClass==='tubular-play' ){
					$("#intro-blurb").addClass('show').removeClass('hide');
					$(".caret").addClass('down').removeClass('up');
					$(myButton).addClass('tubular-pause').removeClass('tubular-play');	
				}
			}
			return;
		}

		function toggleShow(myButton, myElement){
			var myButtonClass = $(myButton).attr('class');
			if ( myButtonClass==='tubular-pause' ){
				$(myElement).addClass('hide').removeClass('show');
			}
			else{
				if ( myButtonClass==='tubular-play' ){
					$(myElement).addClass('show').removeClass('hide');
				}
			}
			return;
		}

		$("#top-bar").click(function() {
			var contentHeight = $(window).height() - ($("#menu-bar").height() + $("#top-bar").height());

//		  	if( iOS_iphone==true ){
//		  		contentHeight = contentHeight * 2;
//		  	}

		  	if( isFalling && iOS_iphone==false ){
    		// isFalling keeps track para saber si apadawn.

    			$("body").scrollTop(0);
				if( $('#featured-pages').height() < contentHeight ){
					//$('#featured-pages').height(contentHeight);
				}
				//else {$('#featured-pages').height($('#link-bar').height*3);}

			}

			$('#content-wrapper').slideToggle(1000, 'swing', function() {
    			togglePlay("#top-bar");
    			$('#intro-text').css("padding-top", ($(window).height() - $("#intro-text").height())/2 + 'px' );


  			});

			isFalling = !isFalling;

		});
		

		$("#footer").click(function() {
    		$("body").animate({scrollTop: 0}, 1000, 'swing');
		});

		if(navigator.userAgent.match(/ipod|ipad|iphone/i)){
			$("body").addClass("ios");
			
		}else if(navigator.userAgent.match(/android/i)){
			$("body").addClass("android");
			
		}
	


		//viewport resizing test
		viewport = document.querySelector("meta[name=viewport]");

		//var iOS_iphone = ( navigator.userAgent.match(/(ipod|iphone)/i) ? true : false );

		if (iOS_iphone==true){
	       viewport.setAttribute('content', 'width=device-width, height=device-height, initial-scale=1.0, maximum-scale=0.5, user-scalable=no');

	       // alert('fuck iOS!');
	    }

		if( navigator.userAgent.match(/Android/i)){ 
	       viewport.setAttribute('content', 'width=device-width, height=device-height, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, target-densitydpi=device-dpi');

	       // alert('fuck android!');
	    }
	    // end viewport resizing test
	    
	    // window resize
	    /*
		function showHeight(ele, h) {
		    $("#result").text("" + ele + 
		                    ": " + h + " px.");}
		$("#getp").click(function () { 
		    showHeight("text block", $("#test-block").height()); });
		    
		$("#getd").click(function () { 
		    showHeight("document", $(document).height()); });
		    
		$("#getw").click(function () { 
		    showHeight("window", $(window).height()); });
		    
		    
		var a = $(document).height()- $("#video-overlay").height();
		 
		$('#video-overlay').css("height", $(window).height() );
	    */
	    
		$(window).resize(function() {
			
			$('#intro-text').css("padding-top", ($(window).height() - $("#intro-text").height())/2 + 'px' );
			var contentHeight = $(window).height() - ($("#menu-bar").height() + $("#top-bar").height());

			if( $('#featured-pages').height() < contentHeight ){
				//$('#featured-pages').height(contentHeight);
			}
			//else {$('#featured-pages').height($('#link-bar').height*3);}
			
		});

		function updateOrientation() {
	        document.body.setAttribute('orient', ['portrait',,'landscape'][window.orientation & 2]);
	        window.scrollTo(0, 0);
	    };
	    window.addEventListener('orientationchange', updateOrientation, false);
	    window.addEventListener('load', updateOrientation, false);

		if(navigator.userAgent.match(/ipod|ipad|iphone/i)){
			$("body").addClass("ios");
		}else if(navigator.userAgent.match(/android/i)){
			$("body").addClass("android");
		}


		/viewport resizing test/
		viewport = document.querySelector("meta[name=viewport]");

		var iOS_iphone = ( navigator.userAgent.match(/(ipod|iphone)/i) ? true : false );

		if (iOS_iphone==true){
	       viewport.setAttribute('content', 'height=device-height, initial-scale=1.0 maximum-scale=0.5, user-scalable=no');
	       // alert('fuck iOS!');
	    }

	    if ( navigator.userAgent.match(/(ipad)/i) ? true : false ){
	       viewport.setAttribute('content', 'height=device-height, initial-scale=1.0 maximum-scale=1.0, user-scalable=no');
	       // alert('fuck iOS!');
	    }

		if( navigator.userAgent.match(/Android/i)){
	       //viewport.setAttribute('content', 'width=device-width, height=device-height, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, target-densitydpi=device-dpi');
	       if ( screen.width <1080 ){
	       	viewport.setAttribute('content', 'width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, target-densitydpi=device-dpi');
	       }else{
	       	viewport.setAttribute('content', 'width=device-width, initial-scale=1.6, maximum-scale=1.6, user-scalable=0, target-densitydpi=device-dpi');
	       }
	       // alert('fuck android!');
	    }
	    // end viewport resizing test
		
		</script>

</body>
</html>